@using TicketSystem.Entities.Dtos.MovieDtos
@model MovieDetailDto
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
function showDiv() {
  var div = document.getElementById("BuyTicketDiv");  
  div.style.display = "block";
}

var sessionId;

function showSessionDiv() {
  var div = document.getElementById("session");
  var place = document.getElementById("places").value;
    alert(place);
  div.style.display = "block";

  var date = new Date();
var day = date.getDate();
var month = date.getMonth() + 1;
var year = date.getFullYear();

if (month < 10) month = "0" + month;
if (day < 10) day = "0" + day;

var today = year + "-" + month + "-" + day;       
document.getElementById("selectDate").value = today;

   
          $.get('/Customer/GetSessions/'+ $("#Movieid").text(), function (data) {
               //create a empty string to append data
               var str_2d = "";
               var str_3d = "";
               //loop through data
               $.each(data, function (index, item) {
                   var hour = item.sessionHour + ":00";
                   if (item.sceneType == "Normal") {
                       //get each list item returned value and add it as string
                       str_2d = str_2d + "<a class='btn btn-primary time' href='/Customer/GetTicketOfSession/"+item.sessionId+"'> " + hour + "<i class='fa fa-clock'></i></a>";
                       
                   }
                   else {
                       str_3d = str_3d + "<a class='btn btn-primary time' href='/Customer/GetTicketOfSession/"+item.sessionId+"'> " + hour + "</a>";
                   }
                   
               });

              
               //append item in Table body to 
               $("#panel-session-2d").html(str_2d);
                $("#panel-session-3d").html(str_3d);
           });

 
}

</script>
<div class="section-header">
    <div class="container">
        <div class="row">

            <div class="col-lg-12">
                <h1 class="page-header">Movie Details</h1>
            </div>

        </div>
    </div> <!-- /.container -->
</div> <!-- /.section-colored -->

<div class="container container-int">

    <ol class="breadcrumb">
        <li><a href="/Home/">Home</a></li>
        <li class="active">@Model.MovieName</li>
    </ol>

    <div class="row">



        <div class="col-md-4">
            @{
                var base64 = Convert.ToBase64String(Model.MovieBanner!);
                var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
             }
                                
            <div class="pro-img-details">
                <img id="large-image" class="img-responsive" src="@imgSrc" alt="Portfolio 1">
            </div>

        </div>

        <div class="col-md-8">
            <h3 id="Movieid">@Model.MovieId</h3>
            <h3><small>Category</small></h3>
            <small>@Model.CategoryName</small>
            
            <h3><small>Vision Date</small></h3>
            <p><small>@Model.MovieVisionDate</small></p>
            <h3>Review</h3>
            <p class="text-justify">@Model.MovieReview</p>
            <a class="btn btn-primary"  onclick="showDiv()">Buy <i class="fa fa-angle-right"></i></a>
            
        </div>

    </div>
    <div class="row" id="BuyTicketDiv">
        <div class="col-lg-3">
            <form class="SelectForm">
                
                <h3 class="searchHeader">Select date:</h3>
                <div class="form-group">

                    <input class="form-control" type="date" id="selectDate" min="2018-04-01" max="2022-04-30" required>
                    <span class="validity"></span>
                </div>
                
            </form>

        </div>
         <div class="col-lg-9 mt-5" id="session" >
             <div class="panel panel-default session">
                <div class="panel-heading">2D</div>
                <div class="panel-body" id="panel-session-2d">
                    
                </div>
                <div class="panel-heading">3D</div>
                <div class="panel-body" id="panel-session-3d" >
                    
                </div>
            </div>
               
         </div>
    </div>

</div><!-- /.container -->
